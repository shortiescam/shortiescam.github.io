<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Imposter - Find the Spy</title>
    
    <!-- Favicon -->
    <link rel="icon" href="https://em-content.zobj.net/source/microsoft-teams/400/disguised-face_1f978.png" type="image/png">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Outfit:wght@400;500;700;800&family=JetBrains+Mono:wght@500;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Outfit', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        slate: {
                            850: '#151e2e',
                            950: '#020617',
                        },
                        brand: {
                            400: '#a78bfa',
                            500: '#8b5cf6',
                            600: '#7c3aed',
                        }
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite',
                        'slide-up': 'slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'fade-in': 'fadeIn 0.5s ease-out forwards',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        slideUp: {
                            'from': { transform: 'translateY(20px)', opacity: '0' },
                            'to': { transform: 'translateY(0)', opacity: '1' },
                        },
                        fadeIn: {
                            'from': { opacity: '0' },
                            'to': { opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        :root {
            --safe-bottom: env(safe-area-inset-bottom, 20px);
        }

        body {
            background-color: #020617;
            color: #f8fafc;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent;
            touch-action: pan-x pan-y;
            height: 100dvh;
            /* Disable text highlighting globally */
            user-select: none;
            -webkit-user-select: none;
        }
        
        /* Modern Glassmorphism */
        .glass-panel {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.2);
        }

        .glass-panel-lighter {
            background: rgba(30, 41, 59, 0.4);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* Scrollbar hiding */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* 3D Transform Utilities */
        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }

        /* Supercell Background Animation */
        .supercell-container {
            position: absolute;
            inset: 0;
            overflow: hidden;
            z-index: 0;
            border-radius: inherit;
        }

        .supercell-bg-1, .supercell-bg-2 {
            position: absolute;
            inset: 0;
            background-size: cover;
            background-position: center;
            mix-blend-mode: overlay;
            transition: opacity 1s ease;
        }

        .supercell-bg-1 {
            background-image: url('https://www.clashchamps.com/wp-content/uploads/2024/06/czJOx2-Q.png');
            opacity: 0.6;
        }

        .supercell-bg-2 {
            background-image: url('https://static0.srcdn.com/wordpress/wp-content/uploads/2021/04/Three-new-Clash-of-Clans-games-announced.jpg');
            opacity: 0;
            animation: supercellFade 10s infinite; /* 5s for one image, 5s for the other = 10s cycle */
        }

        @keyframes supercellFade {
            0%, 45% { opacity: 0; }
            50%, 95% { opacity: 0.6; }
            100% { opacity: 0; }
        }

        /* Ambient Blobs */
        .blob {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.4;
            z-index: 0;
            animation: blob-bounce 10s infinite ease-in-out;
        }
        @keyframes blob-bounce {
            0%, 100% { transform: translate(0, 0) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
        }
    </style>
</head>
<body class="select-none">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- DATA ---
		const WORD_BANK = {
		  Supercell: [
			"Barbarian", "Archer", "Giant", "Goblin", "Wall Breaker", "Balloon", "Wizard", "Healer", "Dragon", "P.E.K.K.A", "Minion", "Hog Rider", "Valkyrie", "Golem", "Witch", "Lava Hound", "Bowler", "Baby Dragon", "Miner", "Electro Dragon", "Yeti", "Ice Golem", "Headhunter", "Barbarian King", "Archer Queen", "Grand Warden", "Royal Champion", "Knight", "Musketeer", "Prince", "Skeleton Army", "Goblin Barrel", "Giant Skeleton", "Royal Giant", "Elite Barbarians", "Mega Minion", "Ice Wizard", "Electro Wizard", "Inferno Dragon", "Night Witch", "Bandit", "Royal Ghost", "Magic Archer", "Lumberjack", "Ram Rider", "Fisherman", "Mother Witch", "Electro Giant", "Phoenix", "Monk", "Little Prince", "Cannon", "Tesla", "Mortar", "X-Bow", "Inferno Tower", "Bomb Tower", "Elixir Collector", "Skeletons", "Bats", "Fire Spirit", "Ice Spirit", "Electro Spirit", "Heal Spirit", "Rage", "Freeze", "Poison", "Fireball", "Arrows", "Zap", "Lightning", "Earthquake", "Clone", "Mirror", "Tornado", "Rocket", "Super Barbarian", "Super Archer", "Super Giant", "Super Wall Breaker", "Super Wizard", "Super Dragon", "Super Valkyrie", "Super Witch", "Super Minion", "Super Bowler", "Ice Hound", "Flying Machine", "Battle Ram", "Sparky", "Mega Knight", "Hunter", "Executioner", "Dart Goblin", "Princess", "Log", "Graveyard", "Mirror", "Giant Snowball", "Royal Delivery", "Heal", "Tombstone", "Bomb", "Hidden Tesla", "Air Defense", "Bomb Tower", "Seeking Air Mine", "Spring Trap", "Giant Bomb", "Red Air Bomb", "Town Hall", "Clan Castle", "Gold Mine", "Elixir Pump", "Barracks", "Laboratory", "Spell Factory", "Workshop", "Seige Machine", "Battle Machine", "Electrofire Wizard"
		  ],

          Celebs: [
			"Leonardo DiCaprio", "Brad Pitt", "Angelina Jolie", "Tom Cruise", "Johnny Depp", "Will Smith", "Dwayne Johnson", "Scarlett Johansson", "Robert Downey Jr", "Jennifer Lawrence", "Chris Hemsworth", "Emma Watson", "Ryan Reynolds", "Keanu Reeves", "Tom Hanks", "Meryl Streep", "Morgan Freeman", "Samuel L Jackson", "Denzel Washington", "Viola Davis", "Oprah Winfrey", "Beyonce", "Taylor Swift", "Cristiano Ronaldo", "Lionel Messi", "Elon Musk", "Mark Zuckerberg", "Bill Gates", "Jeff Bezos", "Barack Obama", "Donald Trump", "Queen Elizabeth", "Princess Diana", "Marilyn Monroe", "Elvis Presley", "Michael Jackson", "Madonna", "Lady Gaga", "Rihanna", "Justin Bieber", "Ariana Grande", "Kylie Jenner", "Kim Kardashian", "Kendall Jenner", "Selena Gomez", "Zendaya", "Tom Holland", "Chris Evans", "Chris Pratt", "Gal Gadot", "Margot Robbie", "Henry Cavill", "Ben Affleck", "Matt Damon", "George Clooney", "Julia Roberts", "Sandra Bullock", "Nicole Kidman", "Halle Berry", "Reese Witherspoon", "Al Pacino", "Robert De Niro", "Jack Nicholson", "Marlon Brando", "Dustin Hoffman", "Anthony Hopkins", "Gary Oldman", "Daniel Day-Lewis", "Christian Bale", "Joaquin Phoenix", "Philip Seymour Hoffman", "Heath Ledger", "Clint Eastwood", "Sean Connery", "Harrison Ford", "Cillian Murphy", "Idris Elba", "Mahershala Ali", "Cate Blanchett", "Kate Winslet", "Jessica Chastain", "Amy Adams", "Emma Stone", "Anne Hathaway", "Natalie Portman", "Charlize Theron", "Tilda Swinton", "Frances McDormand", "Judi Dench", "Helen Mirren", "Maggie Smith", "Audrey Hepburn", "Grace Kelly", "Elizabeth Taylor", "Katharine Hepburn", "Bette Davis", "Ingrid Bergman", "Humphrey Bogart", "Cary Grant", "James Stewart", "Gregory Peck", "Charlie Chaplin", "Buster Keaton", "Laurence Olivier", "Orson Welles", "Kirk Douglas", "Burt Lancaster", "Sidney Poitier", "Paul Newman", "Steve McQueen", "James Dean", "Michelle Yeoh", "Ke Huy Quan", "Brendan Fraser", "Austin Butler", "Florence Pugh", "Anya Taylor-Joy", "Timothée Chalamet", "Pedro Pascal", "Jenna Ortega", "The Beatles", "The Rolling Stones", "Led Zeppelin", "Queen", "Pink Floyd", "Bob Dylan", "David Bowie", "Elton John", "Freddie Mercury", "John Lennon", "Paul McCartney", "George Harrison", "Ringo Starr", "Bruce Springsteen", "Jimi Hendrix", "Eric Clapton", "Prince", "Stevie Wonder", "Aretha Franklin", "Whitney Houston", "Mariah Carey", "Celine Dion", "Frank Sinatra", "Dean Martin", "Sammy Davis Jr.", "Ray Charles", "James Brown", "Johnny Cash", "Bob Marley", "U2", "Nirvana", "Guns N' Roses", "Metallica", "AC/DC", "Eminem", "Dr. Dre", "Snoop Dogg", "Tupac Shakur", "The Notorious B.I.G.", "Jay-Z", "Kanye West", "Adele", "Ed Sheeran", "Coldplay", "Drake", "The Weeknd", "Billie Eilish", "Olivia Rodrigo", "Harry Styles", "Dua Lipa", "Bad Bunny", "J Balvin", "Shakira", "BTS", "BLACKPINK", "Mozart", "Beethoven", "Bach", "Tchaikovsky", "Pavarotti", "Andrea Bocelli", "Dolly Parton", "Willie Nelson", "Michael Jordan", "LeBron James", "Kobe Bryant", "Shaquille O'Neal", "Stephen Curry", "Tom Brady", "Joe Montana", "Peyton Manning", "Serena Williams", "Venus Williams", "Roger Federer", "Rafael Nadal", "Novak Djokovic", "Tiger Woods", "Jack Nicklaus", "Arnold Palmer", "Muhammad Ali", "Mike Tyson", "Floyd Mayweather", "Conor McGregor", "Usain Bolt", "Michael Phelps", "Simone Biles", "Wayne Gretzky", "Pele", "Diego Maradona", "David Beckham", "Neymar Jr.", "Kylian Mbappé", "Lewis Hamilton", "Michael Schumacher", "Ayrton Senna", "Babe Ruth", "Jackie Robinson", "Lionel Richie", "Megan Rapinoe", "Ronda Rousey", "Steven Spielberg", "Martin Scorsese", "Quentin Tarantino", "Christopher Nolan", "James Cameron", "Alfred Hitchcock", "Stanley Kubrick", "Francis Ford Coppola", "Ridley Scott", "Tim Burton", "George Lucas", "Peter Jackson", "The Coen Brothers", "Wes Anderson", "Spike Lee", "Guillermo del Toro", "Akira Kurosawa", "Ingmar Bergman", "Federico Fellini", "Woody Allen", "Clint Eastwood", "Greta Gerwig", "Sofia Coppola", "Chloé Zhao", "Bong Joon-ho", "William Shakespeare", "Charles Dickens", "Jane Austen", "Mark Twain", "Leo Tolstoy", "Fyodor Dostoevsky", "George Orwell", "J.R.R. Tolkien", "C.S. Lewis", "J.K. Rowling", "Stephen King", "George R.R. Martin", "Agatha Christie", "Arthur Conan Doyle", "Ernest Hemingway", "F. Scott Fitzgerald", "Virginia Woolf", "James Joyce", "Gabriel García Márquez", "Haruki Murakami", "Margaret Atwood", "Toni Morrison", "Maya Angelou", "Edgar Allan Poe", "Leonardo da Vinci", "Michelangelo", "Vincent van Gogh", "Pablo Picasso", "Rembrandt", "Claude Monet", "Salvador Dalí", "Frida Kahlo", "Andy Warhol", "Georgia O'Keeffe", "Jackson Pollock", "Banksy", "Coco Chanel", "Christian Dior", "Yves Saint Laurent", "Giorgio Armani", "Ralph Lauren", "Calvin Klein", "Donatella Versace", "Karl Lagerfeld", "Tom Ford", "Alexander McQueen", "Albert Einstein", "Isaac Newton", "Galileo Galilei", "Charles Darwin", "Marie Curie", "Nikola Tesla", "Thomas Edison", "Alexander Graham Bell", "Stephen Hawking", "Carl Sagan", "Neil deGrasse Tyson", "Jane Goodall", "Steve Jobs", "Tim Cook", "Sundar Pichai", "Satya Nadella", "Richard Branson", "Warren Buffett", "Charlie Munger", "Julius Caesar", "Cleopatra", "Alexander the Great", "Napoleon Bonaparte", "Winston Churchill", "Franklin D. Roosevelt", "John F. Kennedy", "Martin Luther King Jr.", "Malcolm X", "Nelson Mandela", "Mahatma Gandhi", "Abraham Lincoln", "George Washington", "Thomas Jefferson", "Queen Victoria", "Joan of Arc", "Vladimir Putin", "Xi Jinping", "Joe Biden", "Kamala Harris", "Angela Merkel", "Justin Trudeau", "Jacinda Ardern", "Volodymyr Zelenskyy", "Dalai Lama", "Pope Francis", "Johnny Carson", "David Letterman", "Jay Leno", "Conan O'Brien", "Ellen DeGeneres", "Jimmy Fallon", "Stephen Colbert", "Jimmy Kimmel", "John Oliver", "Trevor Noah", "Jon Stewart", "Howard Stern", "Joe Rogan", "Larry King", "Barbara Walters", "Walter Cronkite", "Anderson Cooper", "Christiane Amanpour", "Richard Pryor", "George Carlin", "Robin Williams", "Eddie Murphy", "Chris Rock", "Dave Chappelle", "Jerry Seinfeld", "Kevin Hart", "Ricky Gervais", "Gordon Ramsay", "Jamie Oliver", "Anthony Bourdain", "Julia Child", "Martha Stewart", "PewDiePie", "MrBeast (Jimmy Donaldson)", "Charli D'Amelio", "Addison Rae", "Logan Paul", "Jake Paul", "Ninja (Richard Tyler Blevins)", "Emma Chamberlain", "David Dobrik", "Liza Koshy"
		  ],

		  Movies: [
			"The Godfather", "Titanic", "Avatar", "Star Wars", "Jurassic Park", "The Matrix", "Inception", "Forrest Gump", "The Lion King", "Avengers", "Pulp Fiction", "Frozen", "The Dark Knight", "Harry Potter", "Back to the Future", "Rocky", "Gladiator", "Shrek", "Toy Story", "Jaws", "Interstellar", "Parasite", "Coco", "Up", "Wall-E", "Alien", "Terminator", "Fight Club", "Goodfellas", "Spirited Away", "Barbie", "Oppenheimer", "Dune", "Spider-Man", "Black Panther", "Iron Man", "Wonder Woman", "Joker", "Top Gun", "The Shining", "Get Out", "Blade Runner", "E.T.", "Indiana Jones", "Schindler's List", "Lord of the Rings", "Silence of the Lambs", "Casablanca", "Citizen Kane", "The Prestige", "Memento", "Se7en", "Zootopia", "Moana", "Inside Out", "Finding Nemo", "Ratatouille", "The Incredibles", "Whiplash", "La La Land", "The Social Network", "Her", "Gravity", "Mad Max", "Logan", "The Batman", "No Country for Old Men", "The Departed", "Heat", "Scarface", "Die Hard", "Mission Impossible", "John Wick", "Matrix Reloaded", "Matrix Revolutions", "Pulp Fiction", "Kill Bill", "Reservoir Dogs", "Inglourious Basterds", "Django Unchained", "Once Upon a Time in Hollywood", "The Good the Bad and the Ugly", "A Fistful of Dollars", "For A Few Dollars More", "2001: A Space Odyssey", "Apocalypse Now", "Taxi Driver", "One Flew Over the Cuckoo's Nest", "Amadeus", "Chinatown", "Fargo", "No Country for Old Men", "Eternal Sunshine of the Spotless Mind", "Requiem for a Dream", "Pan's Labyrinth", "Oldboy", "Crouching Tiger Hidden Dragon", "Drive", "Donnie Darko", "The Grand Budapest Hotel", "Whiplash", "Boyhood", "Mad Max: Fury Road", "Room", "Spotlight", "Moonlight", "Call Me By Your Name", "Get Out", "Nomadland", "Everything Everywhere All at Once", "Poor Things"
		  ],

		  Food: [
			"Pizza", "Sushi", "Burger", "Tacos", "Pasta", "Curry", "Steak", "Salad", "Sandwich", "Soup", "Fried Chicken", "Ramen", "Dumplings", "Burrito", "Pancakes", "Waffles", "Ice Cream", "Chocolate", "Cheese", "Bread", "Donuts", "Croissant", "Bagel", "Hot Dog", "Fries", "Lasagna", "Paella", "Kebab", "Falafel", "Dim Sum", "Pho", "Pad Thai", "Biryani", "Sashimi", "Tiramisu", "Cheesecake", "Pie", "Brownie", "Popcorn", "Nachos", "Guacamole", "Hummus", "Omelette", "Yogurt", "Bacon", "Sausage", "Risotto", "Gnocchi", "Pretzel", "Macaron", "Tofu", "Kimchi", "Spring Roll", "Fish and Chips", "Meatballs", "Chili", "Stew", "Cereal", "Toast", "Jam", "Honey", "Butter", "Smoothie", "Milkshake", "Cupcake", "Muffin", "Pudding", "Custard", "Gelato", "Sorbet", "Noodles", "Udon", "Soba", "Tempura", "Katsu", "Ribs", "Hot Wings", "BBQ", "Fajitas", "Quesadilla", "Empanada", "Arepa", "Chow Mein", "Fried Rice", "Tikka Masala", "Goulash", "Ceviche", "Moussaka", "Pierogi", "Schnitzel", "Tapas", "Wonton", "Lumpia", "Jambalaya", "Gumbo", "Beignets", "Baklava", "Cannoli", "Crepe", "Panna Cotta", "Scone", "Biscotti", "Mochi", "Churro", "Eclair", "Souffle", "Fondue", "Pesto", "Salsa", "Relish", "Mustard", "Ketchup", "Mayonnaise", "Vinegar", "Olive Oil", "Saffron", "Cinnamon", "Basil", "Oregano", "Thyme", "Rosemary", "Garlic", "Onion", "Ginger", "Pepper", "Salt", "Sugar", "Flour", "Egg", "Milk", "Coffee", "Tea", "Juice", "Water", "Soda", "Wine", "Beer", "Cocktail", "Whiskey", "Vodka", "Gin", "Rum", "Tequila"
		  ],

		  Brands: [
			"Apple", "Nike", "Coca-Cola", "Samsung", "McDonalds", "Toyota", "Disney", "Amazon", "Google", "Tesla", "Adidas", "Pepsi", "Starbucks", "Netflix", "Microsoft", "Mercedes", "BMW", "Honda", "Sony", "Lego", "IKEA", "Zara", "H&M", "Gucci", "Louis Vuitton", "Rolex", "Canon", "Nikon", "PlayStation", "Xbox", "Spotify", "Uber", "Airbnb", "Facebook", "Instagram", "TikTok", "Twitter", "YouTube", "Visa", "Mastercard", "Ferrari", "Porsche", "Lamborghini", "Intel", "AMD", "Dell", "HP", "Adobe", "Slack", "Zoom", "Ford", "Chevrolet", "Jeep", "Nissan", "Hyundai", "Kia", "Volkswagen", "Audi", "Prada", "Chanel", "Hermes", "Versace", "Burberry", "Tiffany", "Cartier", "Omega", "Asus", "Acer", "Lenovo", "Huawei", "Xiaomi", "Red Bull", "Monster", "Shell", "BP", "Total", "Pfizer", "Moderna", "LG", "Panasonic", "Philips", "Bosch", "Siemens", "General Electric", "Caterpillar", "Boeing", "SpaceX", "Virgin Galactic", "Nintendo", "Electronic Arts", "Activision Blizzard", "Ubisoft", "Rockstar Games", "Square Enix", "Capcom", "Sega", "Bandai Namco", "Puma", "Under Armour", "New Balance", "Reebok", "Converse", "Vans", "Doc Martens", "Ray-Ban", "Oakley", "Fender", "Gibson", "Yamaha", "Bose", "JBL", "Harman Kardon", "Dyson", "SharkNinja", "Whirlpool", "Electrolux", "KitchenAid", "Tefal", "Logitech", "Razer", "Corsair", "Seagate", "Western Digital", "Kingston", "SanDisk"
		  ],

		  Technology: [
			"iPhone", "Laptop", "Drone", "Robot", "Bluetooth", "Wifi", "Keyboard", "Mouse", "Monitor", "Camera", "Headphones", "Smartwatch", "Tablet", "Printer", "Router", "Server", "Microchip", "Satellite", "Telescope", "Microscope", "VR Headset", "Console", "Battery", "Charger", "USB", "Cloud", "Algorithm", "Internet", "Software", "Hardware", "Smartphone", "GPS", "Laser", "Radar", "Scanner", "Projector", "Speaker", "Microphone", "Webcam", "Flash Drive", "Hard Drive", "Processor", "Graphics Card", "Motherboard", "Fan", "Screen", "Pixel", "Code", "Database", "Network", "Firewall", "Encryption", "Hacker", "Virus", "AI", "Blockchain", "Crypto", "NFT", "API", "Framework", "Library", "Compiler", "Terminal", "Shell", "Kernel", "Operating System", "Linux", "Windows", "MacOS", "Android", "iOS", "Ethernet", "5G", "4G", "Fiber", "Quantum Computer", "VR", "AR", "Mixed Reality", "Biometrics", "Cybernetics", "Nanotechnology", "Supercomputer", "Mainframe", "Modem", "Switch", "Hub", "Gateway", "Protocol", "TCP/IP", "HTTP", "HTML", "CSS", "JavaScript", "Python", "Java", "C++", "C#", "SQL", "Big Data", "Machine Learning", "Deep Learning", "Neural Network", "IoT", "Smart Home", "Smart Grid", "Automation", "Robotics", "Interface", "User Experience", "User Interface", "Touchscreen", "Gesture Control", "Voice Recognition", "Speech Synthesis", "Teleportation", "Hologram", "Transistor", "Capacitor", "Resistor", "Diode", "Semiconductor"
		  ],

		  Jobs: [
			"Doctor", "Teacher", "Engineer", "Lawyer", "Chef", "Pilot", "Firefighter", "Police", "Artist", "Musician", "Actor", "Writer", "Scientist", "Programmer", "Designer", "Architect", "Nurse", "Dentist", "Vet", "Farmer", "Astronaut", "Athlete", "Judge", "Politician", "Journalist", "Photographer", "Mechanic", "Plumber", "Electrician", "Carpenter", "Librarian", "Accountant", "Manager", "CEO", "Secretary", "Receptionist", "Waiter", "Bartender", "Barber", "Soldier", "Detective", "Spy", "Stewardess", "Captain", "Sailor", "Miner", "Baker", "Butcher", "Tailor", "Cleaner", "Gardener", "Driver", "Postman", "Courier", "Guard", "Coach", "Referee", "Data Analyst", "Data Scientist", "DevOps Engineer", "Cybersecurity Analyst", "Product Manager", "QA Tester", "Game Designer", "Animator", "3D Artist", "Sound Engineer", "Video Editor", "Therapist", "Counselor", "Social Worker", "Lobbyist", "Economist", "Statistician", "Mathematician", "Historian", "Archaeologist", "Geologist", "Meteorologist", "Biochemist", "Chemist", "Physicist", "Actuary", "Stockbroker", "Banker", "Real Estate Agent", "Broker", "Goldsmith", "Silversmith", "Welder", "Roofer", "Mason", "Crane Operator", "Truck Driver", "Taxi Driver", "Bus Driver", "Flight Attendant", "Customs Officer", "Border Patrol Agent", "Park Ranger", "Zookeeper", "Fisherman", "Forester", "Model", "Blogger", "Vlogger", "Influencer", "Tattoo Artist", "Florist", "Upholsterer", "Locksmith", "Mortician", "Embalmer"
		  ],

		  Mythology: [
			"Zeus", "Thor", "Hercules", "Medusa", "Dragon", "Unicorn", "Phoenix", "Mermaid", "Centaur", "Griffin", "Poseidon", "Hades", "Athena", "Apollo", "Odin", "Loki", "Anubis", "Ra", "Sphinx", "Hydra", "Cyclops", "Minotaur", "Pegasus", "Vampire", "Werewolf", "Ghost", "Zombie", "Elf", "Dwarf", "Giant", "Kraken", "Chimera", "Cerberus", "Valkyrie", "Fairy", "Goblin", "Troll", "Witch", "Wizard", "Demon", "Angel", "Spirit", "Titan", "Nymph", "Satyr", "Basilisk", "Yeti", "Bigfoot", "Loch Ness", "Mummy", "Alien", "Genie", "Leprechaun", "Banshee", "Siren", "Frost Giant", "Fire Giant", "Dryad", "Gorgon", "Harpy", "Ifrit", "Djinn", "Rakshasa", "Asura", "Deva", "Aphrodite", "Ares", "Artemis", "Hephaestus", "Hera", "Hermes", "Dionysus", "Demeter", "Persephone", "Gaia", "Ouranos", "Cronus", "Atlas", "Prometheus", "Achilles", "Aeneas", "Romulus", "Remus", "Quetzalcoatl", "Tlaloc", "Amaterasu", "Susanoo", "Huitzilopochtli", "King Arthur", "Merlin", "Ganesha", "Vishnu", "Shiva", "Brahma", "Kali", "Cthulhu", "Wendigo", "Chupacabra", "Kappa", "Yōkai", "Jiangshi", "Succubus", "Incubus", "Banshee", "Brownie", "Imp", "Kobold", "Nixie", "Selkie", "Sköll", "Hati", "Fenrir", "Jörmungandr", "Sleipnir"
		  ],

		  Sport: [
			"Soccer", "Basketball", "Football", "Tennis", "Golf", "Cricket", "Rugby", "Baseball", "Volleyball", "Hockey", "Boxing", "MMA", "Wrestling", "Formula 1", "Swimming", "Athletics", "Gymnastics", "Cycling", "Skiing", "Surfing", "Skateboarding", "Snowboarding", "Table Tennis", "Badminton", "Bowling", "Pool", "Darts", "Archery", "Fencing", "Judo", "Karate", "Taekwondo", "Yoga", "Pilates", "Crossfit", "Marathon", "Triathlon", "Rowing", "Sailing", "Climbing", "Hiking", "Fishing", "Hunting", "Horse Riding", "Polo", "Lacrosse", "Handball", "Squash", "Racquetball", "Softball", "Kickball", "Dodgeball", "Frisbee", "Parkour", "Cheerleading", "Ballet", "Weightlifting", "Powerlifting", "Strongman", "eSports", "Chess", "Go", "Poker", "Snooker", "Curling", "Bobsleigh", "Netball", "Korfball", "Water Polo", "Field Hockey", "Ice Skating", "Figure Skating", "Speed Skating", "Luge", "Skeleton", "Javelin", "Discus", "Shot Put", "Hurdles", "Steeplechase", "Decathlon", "Heptathlon", "Motocross", "NASCAR", "IndyCar", "Skeet Shooting", "Trap Shooting", "Kite Surfing", "Windsurfing", "Canoeing", "Kayaking", "Synchronized Swimming", "Trampolining", "Tumbling", "Bodybuilding", "Ultimate Frisbee", "Tug of War", "Rock Climbing", "Mountaineering", "Orienteering"
		  ],

		  Places: [
			"School", "Hospital", "Library", "Airport", "Station", "Park", "Beach", "Forest", "Mountain", "Desert", "City", "Village", "Farm", "Zoo", "Museum", "Cinema", "Mall", "Restaurant", "Hotel", "Bank", "Office", "Factory", "Prison", "Church", "Temple", "Mosque", "Stadium", "Gym", "Pool", "Casino", "Castle", "Palace", "Bridge", "Tower", "Skyscraper", "Lighthouse", "Pyramid", "Cave", "Island", "Volcano", "Jungle", "Swamp", "River", "Lake", "Ocean", "Space", "Moon", "Mars", "Sun", "Star", "Galaxy", "Universe", "Heaven", "Hell", "Garden", "Garage", "Basement", "Attic", "Playground", "Harbor", "Port", "Dock", "Subway", "Tunnel", "Highway", "Village", "Town", "Capitol", "Embassy", "Laboratory", "Observatory", "Canyon", "Glacier", "Tundra", "Meadow", "Savanna", "Delta", "Peninsula", "Archipelago", "Reef", "Fjord", "Grotto", "Wasteland", "Oasis", "Labyrinth", "Cathedral", "Synagogue", "Pagoda", "Bunker", "Hangar", "Silo", "Warehouse", "Apartment", "Condo", "Cottage", "Cabin", "Mansion", "Shack", "Tent", "Caravan", "Motorhome", "Bazaar", "Market", "Flea Market", "Bookstore", "Bakery", "Pharmacy", "Post Office", "Courtroom", "Jail", "Campground", "Amusement Park", "Water Park", "Bowling Alley", "Ice Rink", "Recording Studio", "Data Center"
		  ],

		  Instruments: [
			"Guitar", "Piano", "Drums", "Violin", "Flute", "Saxophone", "Trumpet", "Cello", "Harp", "Clarinet", "Trombone", "Tuba", "Banjo", "Ukulele", "Accordion", "Harmonica", "Xylophone", "Synthesizer", "Oboe", "Bass", "Microphone", "Turntable", "Speaker", "Amplifier", "Bongo", "Conga", "Tambourine", "Maracas", "Triangle", "Gong", "Cymbal", "Organ", "Keyboard", "Bagpipes", "Didgeridoo", "Sitar", "Lute", "Mandolin", "Recorder", "Whistle", "Bell", "Chime", "Castanets", "Cowbell", "Kazoo", "Theremin", "Viola", "Double Bass", "Bassoon", "French Horn", "Piccolo", "Melodica", "Steel Drum", "Clave", "Guiro", "Shakuhachi", "Erhu", "Timbales", "Vibraphone", "Marimba", "Glockenspiel", "Handpan", "Djembe", "Cajón", "Bodhrán", "Zither", "Harpsichord", "Celesta", "Spinet", "Vielle", "Hurdy-Gurdy", "Balalaika", "Bouzouki", "Sheng", "Pipa", "Koto", "Shamisen", "Duduk", "Kaval", "Cornet", "Flugelhorn", "Sousaphone", "Euphonium", "Piccolo Trumpet", "Alto Saxophone", "Tenor Saxophone", "Baritone Saxophone", "Bass Clarinet", "English Horn", "Contrabassoon", "Timpani", "Snare Drum", "Bass Drum", "Hi-Hat", "Drum Kit"
		  ],

		  Superheroes: [
			"Superman", "Batman", "Spider-Man", "Iron Man", "Wonder Woman", "Thor", "Hulk", "Captain America", "Black Panther", "Flash", "Aquaman", "Green Lantern", "Wolverine", "Deadpool", "Doctor Strange", "Black Widow", "Hawkeye", "Ant-Man", "Daredevil", "Cyclops", "Storm", "Jean Grey", "Professor X", "Magneto", "Joker", "Thanos", "Loki", "Venom", "Groot", "Rocket", "Star-Lord", "Gamora", "Drax", "Nebula", "Mantis", "Vision", "Scarlet Witch", "Falcon", "Winter Soldier", "War Machine", "Nick Fury", "Captain Marvel", "Shazam", "Green Arrow", "Supergirl", "Batgirl", "Robin", "Nightwing", "Cyborg", "Beast Boy", "Raven", "Starfire", "Blue Beetle", "Moon Knight", "Ms Marvel", "She-Hulk", "Punisher", "Blade", "Ghost Rider", "Iron Fist", "Luke Cage", "Martian Manhunter", "Zatanna", "Booster Gold", "Hawkman", "Hawkgirl", "Firestorm", "Plastic Man", "Hellboy", "Spawn", "Judge Dredd", "Silver Surfer", "Human Torch", "Thing", "Invisible Woman", "Mr Fantastic", "Elektra", "Cable", "Domino", "Rogue", "Gambit", "Iceman", "Beast", "Angel", "Colossus", "Psylocke", "Bishop", "Emma Frost", "Deadshot", "Harley Quinn", "Poison Ivy", "Catwoman", "Riddler", "Penguin", "Two-Face", "Bane", "Lex Luthor", "General Zod", "Ultron", "Galactus", "Doctor Doom", "Apocalypse", "Kang", "Red Skull", "Green Goblin", "Doctor Octopus", "Vulture", "Kraven", "Mysterio"
		  ],

		  Animals: [
			"Lion", "Tiger", "Elephant", "Giraffe", "Penguin", "Dolphin", "Whale", "Shark", "Eagle", "Parrot", "Dog", "Cat", "Hamster", "Snake", "Lizard", "Frog", "Bear", "Wolf", "Fox", "Deer", "Zebra", "Kangaroo", "Koala", "Panda", "Gorilla", "Monkey", "Rabbit", "Mouse", "Rat", "Bat", "Owl", "Hawk", "Crocodile", "Alligator", "Turtle", "Octopus", "Jellyfish", "Crab", "Lobster", "Spider", "Bee", "Ant", "Butterfly", "Moth", "Dragonfly", "Mosquito", "Fly", "Beetle", "Worm", "Snail", "Cheetah", "Leopard", "Rhino", "Hippo", "Camel", "Llama", "Alpaca", "Sheep", "Goat", "Cow", "Pig", "Horse", "Chicken", "Duck", "Goose", "Turkey", "Peacock", "Swan", "Flamingo", "Otter", "Seal", "Walrus", "Moose", "Reindeer", "Bison", "Buffalo", "Chimpanzee", "Orangutan", "Gibbon", "Sloth", "Armadillo", "Hedgehog", "Shrew", "Mole", "Badger", "Weasel", "Ferret", "Skunk", "Coyote", "Jackal", "Hyena", "Bobcat", "Lynx", "Cougar", "Ocelot", "Dingo", "Cobra", "Viper", "Python", "Boa", "Gecko", "Iguana", "Chameleon", "Salamander", "Newt", "Toad", "Tuna", "Salmon", "Cod", "Herring", "Mackerel", "Seahorse", "Starfish", "Eel", "Wasp", "Hornet", "Termite", "Scorpion", "Centipede", "Millipede", "Marten", "Mink", "Racoon", "Opossum", "Wombat", "Platypus", "Echidna", "Dodo", "Mammoth"
		  ],

		  Countries: [
			"USA", "Canada", "Mexico", "Brazil", "Argentina", "UK", "France", "Germany", "Italy", "Spain", "Russia", "China", "Japan", "India", "Australia", "Egypt", "South Africa", "Nigeria", "Kenya", "Morocco", "Turkey", "Saudi Arabia", "Iran", "Israel", "Sweden", "Norway", "Finland", "Denmark", "Netherlands", "Belgium", "Switzerland", "Austria", "Poland", "Greece", "Portugal", "Ireland", "Scotland", "Wales", "Thailand", "Vietnam", "Indonesia", "Philippines", "Malaysia", "Singapore", "South Korea", "North Korea", "Pakistan", "Bangladesh", "New Zealand", "Fiji", "Cuba", "Jamaica", "Peru", "Chile", "Colombia", "Venezuela", "Ukraine", "Romania", "Hungary", "Czech Republic", "Croatia", "Serbia", "Slovakia", "Slovenia", "Latvia", "Lithuania", "Estonia", "Iceland", "Luxembourg", "Qatar", "UAE", "Oman", "Jordan", "Iraq", "Syria", "Lebanon", "Afghanistan", "Albania", "Algeria", "Andorra", "Angola", "Armenia", "Azerbaijan", "Bahamas", "Bahrain", "Barbados", "Belarus", "Belize", "Benin", "Bhutan", "Bolivia", "Bosnia", "Botswana", "Bulgaria", "Burkina Faso", "Burundi", "Cambodia", "Cameroon", "Central African Republic", "Chad", "Comoros", "Congo", "Costa Rica", "Cyprus", "Djibouti", "Dominica", "Ecuador", "El Salvador", "Eritrea", "Ethiopia", "Gabon", "Gambia", "Georgia", "Ghana", "Guatemala", "Guinea", "Guyana", "Haiti", "Honduras", "Kazakhstan", "Kuwait", "Laos", "Malta", "Monaco", "Mongolia", "Nepal", "Panama", "Paraguay", "Tanzania", "Uganda", "Uruguay", "Uzbekistan", "Yemen", "Zambia", "Zimbabwe"
		  ],

		  VideoGames: [
			"Mario", "Zelda", "Pokemon", "Minecraft", "Fortnite", "Roblox", "Call of Duty", "GTA", "Halo", "God of War", "The Witcher", "Skyrim", "Fallout", "Overwatch", "League of Legends", "Dota", "World of Warcraft", "Counter-Strike", "Valorant", "Apex Legends", "Tetris", "Pac-Man", "Sonic", "Street Fighter", "Mortal Kombat", "Tekken", "Final Fantasy", "Resident Evil", "Silent Hill", "Metal Gear Solid", "Uncharted", "The Last of Us", "Red Dead Redemption", "Cyberpunk", "Elden Ring", "Dark Souls", "Bloodborne", "Sekiro", "Animal Crossing", "Stardew Valley", "Among Us", "Rocket League", "FIFA", "NBA 2K", "Madden", "Sims", "Civilization", "Portal", "Half-Life", "Doom", "Quake", "Bioshock", "Mass Effect", "Assassins Creed", "Far Cry", "Destiny", "Hades", "Dead Cells", "Cuphead", "Undertale", "Terraria", "Subnautica", "Valheim", "No Mans Sky", "Starcraft", "Diablo", "Warcraft", "Guild Wars", "Runescape", "Eve Online", "Genshin Impact", "Honkai Star Rail", "Monster Hunter", "Kingdom Hearts", "Metroid", "Castlevania", "Donkey Kong", "Kirby", "Smash Bros", "Bayonetta", "Devil May Cry", "Ninja Gaiden", "Persona", "Dragon Quest", "Grand Turismo", "Forza", "Need for Speed", "Burnout", "Tomb Raider", "Dishonored", "Prey", "Deus Ex", "Saints Row", "Borderlands", "Gears of War", "Battlefield", "Crysis", "Rime", "Limbo", "Inside", "Celeste", "Shovel Knight", "Hollow Knight", "Disco Elysium", "Outer Wilds", "Returnal", "Deathloop", "Ghost of Tsushima"
		  ],

		  Science: [
			"Atom", "Molecule", "Cell", "DNA", "Gravity", "Magnetism", "Electricity", "Light", "Sound", "Heat", "Energy", "Force", "Motion", "Planet", "Star", "Galaxy", "Black Hole", "Comet", "Asteroid", "Meteor", "Element", "Compound", "Acid", "Base", "Bacteria", "Virus", "Fungus", "Plant", "Animal", "Human", "Brain", "Heart", "Lungs", "Stomach", "Bone", "Muscle", "Nerve", "Blood", "Skin", "Evolution", "Photosynthesis", "Respiration", "Digestion", "Reproduction", "Genetics", "Chemistry", "Physics", "Biology", "Astronomy", "Geology", "Microscope", "Telescope", "Thermometer", "Barometer", "Compass", "Magnet", "Battery", "Circuit", "Prism", "Lens", "Mirror", "Laser", "Robot", "Satellite", "Rocket", "Quantum", "Relativity", "Entropy", "Neutrino", "Photon", "Proton", "Electron", "Neutron", "Ecosystem", "Habitat", "Ecology", "Biotechnology", "Thermodynamics", "Mechanics", "Optics", "Acoustics", "Fission", "Fusion", "Tsunami", "Earthquake", "Volcano", "Fossil", "Sediment", "Igneous", "Metamorphic", "Wavelength", "Frequency", "Amplitude", "Current", "Voltage", "Resistance", "Capacitance", "Inductance", "Superconductivity", "Semiconductor", "Crystal", "Alloy", "Isotope", "Enzyme", "Hormone", "Antibody", "Vaccine", "Pathogen", "Amoeba", "Organism", "Substance", "Mass", "Volume", "Density", "Pressure", "Velocity", "Acceleration", "Momentum"
		  ],

		  Clothing: [
			"Shirt", "T-Shirt", "Pants", "Jeans", "Shorts", "Skirt", "Dress", "Suit", "Coat", "Jacket", "Sweater", "Hoodie", "Vest", "Scarf", "Gloves", "Hat", "Cap", "Beanie", "Socks", "Shoes", "Boots", "Sandals", "Sneakers", "Heels", "Slippers", "Belt", "Tie", "Bowtie", "Watch", "Glasses", "Sunglasses", "Ring", "Necklace", "Bracelet", "Earrings", "Wallet", "Purse", "Backpack", "Bag", "Umbrella", "Raincoat", "Swimsuit", "Bikini", "Pajamas", "Robe", "Uniform", "Costume", "Mask", "Helmet", "Crown", "Tiara", "Cape", "Apron", "Overalls", "Leggings", "Tights", "Stockings", "Underwear", "Bra", "Boxers", "Briefs", "Diaper", "Bib", "Cardigan", "Blazer", "Poncho", "Cloak", "Kimono", "Sari", "Jumpsuit", "Romper", "Tunic", "Polo Shirt", "Tank Top", "Blouse", "Cami", "Drawers", "Chinos", "Cords", "Trousers", "Culottes", "Kilt", "Shawl", "Stole", "Mittens", "Earmuffs", "Fedora", "Beret", "Visor", "Loafers", "Espadrilles", "Wedges", "Stilettos", "Moccasins", "Garter", "Suspenders", "Cummerbund", "Cufflinks", "Brooch", "Pin", "Locket", "Fanny Pack", "Tote Bag", "Duffel Bag", "Satchel", "Briefcase", "Gown", "Tuxedo", "Smoking Jacket", "Parka", "Anorak", "Trench Coat"
		  ],

		  Home: [
			"Table", "Chair", "Sofa", "Bed", "Desk", "Shelf", "Cabinet", "Cupboard", "Wardrobe", "Lamp", "Light", "Fan", "Heater", "AC", "Fridge", "Stove", "Oven", "Microwave", "Toaster", "Blender", "Mixer", "Kettle", "Pot", "Pan", "Plate", "Bowl", "Cup", "Glass", "Mug", "Fork", "Spoon", "Knife", "Napkin", "Towel", "Soap", "Shampoo", "Toothbrush", "Toothpaste", "Comb", "Brush", "Mirror", "Clock", "Calendar", "Painting", "Vase", "Rug", "Carpet", "Curtains", "Blinds", "Pillow", "Blanket", "Sheet", "Mattress", "Cushion", "Door", "Window", "Wall", "Floor", "Ceiling", "Roof", "Stairs", "Ladder", "Broom", "Mop", "Bucket", "Trash Can", "Vacuum", "Iron", "Ironing Board", "Dishwasher", "Washing Machine", "Dryer", "Radiator", "Thermostat", "Dresser", "Nightstand", "Bookcase", "Armoire", "Hutch", "Coffee Table", "End Table", "Bar Stool", "Rocker", "Recliner", "Lounge Chair", "Faucet", "Sink", "Toilet", "Shower", "Tub", "Detergent", "Bleach", "Sponge", "Scrubber", "Dustpan", "Hose", "Sprinkler", "Shovel", "Rake", "Trowel", "Hammer", "Screwdriver", "Wrench", "Pliers", "Drill", "Saw", "Level", "Tape Measure", "Toolbox", "Outlet", "Switch", "Fuse", "Circuit Breaker", "Gutter", "Shingle", "Chimney", "Patio", "Deck", "Balcony", "Porch", "Hallway", "Utility Room", "Pantry", "Fireplace", "Hearth", "Mantle"
		  ],

		  People: [
			"President", "King", "Queen", "Athlete", "Celebrity", "Artist", "Musician", "Scientist", "Teacher", "Student", "Child", "Elderly", "Baby", "Tourist", "Police Officer", "Doctor", "Firefighter", "Chef", "Astronaut", "Villain", "Hero", "Neighbor", "Friend", "Boss", "Employee", "Stranger", "Beggar", "Model", "Guard", "Priest", "Nun", "Monk", "Philosopher", "Inventor", "Explorer", "Pirate", "Ninja", "Samurai", "Viking", "Knight", "Jester", "Clown", "Magician", "Detective", "Spy", "Ghost", "Alien", "Robot", "Vampire", "Werewolf", "Zombie", "Mermaid", "Dwarf", "Elf", "Giant", "Wizard", "Witch", "Engineer", "Farmer", "Merchant", "Trader", "Sailor", "Captain", "Hunter", "Siblings", "Parent", "Grandparent", "Cousin", "Aunt", "Uncle", "Nephew", "Niece", "Spouse", "Partner", "Fiancé", "Groom", "Bride", "Best Man", "Maid of Honor", "Godparent", "Roommate", "Landlord", "Tenant", "Client", "Customer", "Vendor", "Supplier", "Consumer", "Patient", "Commuter", "Pedestrian", "Audience", "Spectator", "Witness", "Suspect", "Victim", "Heir", "Royal", "Emperor", "Duchess", "Duke", "Count", "Earl", "Baron", "Bishop", "Deacon", "Rabbi", "Imam", "Shaman", "Oracle", "Seer", "Prophet", "Barbarian", "Gladiator", "Centurion", "Scribe", "Herald", "Courier"
		  ]
		};

        const CATEGORY_ICONS = {
            Supercell: "https://twitch.supercell.com/supercell-logo.png",
            Celebs: "https://em-content.zobj.net/source/microsoft-teams/337/smiling-face-with-sunglasses_1f60e.png",
            Movies: "https://em-content.zobj.net/source/microsoft-teams/337/popcorn_1f37f.png",
            Food: "https://em-content.zobj.net/source/microsoft-teams/363/hamburger_1f354.png",
            Brands: "https://em-content.zobj.net/source/microsoft-teams/337/shopping-bags_1f6cd-fe0f.png",
            Technology: "https://em-content.zobj.net/source/microsoft-teams/337/gear_2699-fe0f.png",
            Jobs: "https://em-content.zobj.net/source/microsoft-teams/337/briefcase_1f4bc.png",
            Mythology: "https://em-content.zobj.net/source/microsoft-teams/337/dragon-face_1f432.png", 
            Sport: "https://em-content.zobj.net/source/microsoft-teams/337/trophy_1f3c6.png",
            Places: "https://em-content.zobj.net/source/microsoft-teams/337/cityscape_1f3d9-fe0f.png",
            Instruments: "https://em-content.zobj.net/source/microsoft-teams/337/musical-note_1f3b5.png",
            Superheroes: "https://em-content.zobj.net/source/microsoft-teams/337/superhero_light-skin-tone_1f9b8-1f3fb_1f3fb.png",
            Animals: "https://em-content.zobj.net/source/microsoft-teams/337/service-dog_1f415-200d-1f9ba.png",
            Countries: "https://em-content.zobj.net/source/microsoft-teams/337/globe-showing-americas_1f30e.png",
            VideoGames: "https://em-content.zobj.net/source/microsoft-teams/337/joystick_1f579-fe0f.png",
            Science: "https://em-content.zobj.net/source/microsoft-teams/363/scientist-light-skin-tone_1f9d1-1f3fb-200d-1f52c.png",
            Clothing: "https://em-content.zobj.net/source/microsoft-teams/337/t-shirt_1f455.png",
            Home: "https://em-content.zobj.net/source/microsoft-teams/337/house_1f3e0.png",
            People: [
                "https://em-content.zobj.net/source/microsoft-teams/337/person_light-skin-tone_1f9d1-1f3fb_1f3fb.png",
                "https://em-content.zobj.net/source/microsoft-teams/337/old-man_light-skin-tone_1f474-1f3fb_1f3fb.png",
                "https://em-content.zobj.net/source/microsoft-teams/337/boy_medium-dark-skin-tone_1f466-1f3fe_1f3fe.png",
                "https://em-content.zobj.net/source/microsoft-teams/337/boy_medium-light-skin-tone_1f466-1f3fc_1f3fc.png",
                "https://em-content.zobj.net/source/microsoft-teams/337/woman-medium-light-skin-tone-red-hair_1f469-1f3fc-200d-1f9b0.png"
            ]
        };
        
        const DISPLAY_CATEGORIES = ['Supercell', ...Object.keys(WORD_BANK).filter(c => c !== 'Supercell')];

        // --- COMPONENTS ---

        const FaIcon = ({ name, sizeClass = "text-xl", className = "" }) => {
            const [currentImageIndex, setCurrentImageIndex] = useState(0);

            useEffect(() => {
                if (Array.isArray(name) && name.length > 1) {
                    const interval = setInterval(() => {
                        setCurrentImageIndex(prev => (prev + 1) % name.length);
                    }, 5000);
                    return () => clearInterval(interval);
                }
            }, [name]);

            if (Array.isArray(name)) {
                return (
                    <div className={`relative w-8 h-8 inline-block ${className}`}>
                        {name.map((url, index) => (
                             <img 
                                key={url} 
                                src={url} 
                                alt="icon" 
                                className={`absolute inset-0 w-full h-full object-contain transition-opacity duration-1000 ${index === currentImageIndex ? 'opacity-100' : 'opacity-0'}`} 
                             />
                        ))}
                    </div>
                );
            }

            if (name.startsWith('http')) {
                return <img src={name} alt="icon" className={`w-8 h-8 object-contain ${className}`} />;
            }
            return <i className={`fa-solid ${name} ${sizeClass} ${className}`}></i>;
        };

        // Modal for Long Press Category Info
        const CategoryInfoModal = ({ category, onClose }) => {
            if (!category) return null;
            
            const examples = WORD_BANK[category].slice(0, 8).join(", ");
            const icon = CATEGORY_ICONS[category];

            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center p-6 animate-fadeIn">
                    <div className="absolute inset-0 bg-black/60 backdrop-blur-md" onClick={onClose}></div>
                    <div className="relative w-full max-w-sm glass-panel rounded-3xl p-6 border border-white/10 shadow-2xl animate-slide-up transform transition-all">
                        <button onClick={onClose} className="absolute top-4 right-4 w-8 h-8 flex items-center justify-center bg-white/5 rounded-full text-white/50 hover:bg-white/10">
                            <i className="fa-solid fa-xmark"></i>
                        </button>
                        
                        <div className="flex flex-col items-center text-center mb-6">
                            <div className={`w-20 h-20 rounded-full flex items-center justify-center mb-4 ${category === 'Supercell' ? 'bg-blue-500/20' : 'bg-brand-500/20'} ring-1 ring-white/10`}>
                                <FaIcon name={icon} sizeClass="text-3xl" className={category === 'Supercell' ? '' : 'text-brand-400'} />
                            </div>
                            <h2 className="text-2xl font-display font-bold text-white">{category}</h2>
                            <p className="text-white/40 text-xs font-bold tracking-widest uppercase mt-1">Category Info</p>
                        </div>
                        
                        <div className="bg-white/5 rounded-xl p-4 border border-white/5">
                            <h3 className="text-white/70 text-sm font-semibold mb-2 flex items-center gap-2">
                                <i className="fa-solid fa-list-ul text-brand-400 text-xs"></i> Examples
                            </h3>
                            <p className="text-white/90 text-sm leading-relaxed">
                                {examples}, and more...
                            </p>
                        </div>
                        
                        <div className="mt-6 text-center text-white/30 text-xs">
                            Tap anywhere to close
                        </div>
                    </div>
                </div>
            );
        };

        // 1. Setup Screen
        const SetupScreen = ({ onStartGame }) => {
            const DEFAULT_PLAYERS = ['Player 1', 'Player 2', 'Player 3'];
            const MIN_PLAYERS = 3;

            // --- State Persistence Logic ---
            const [players, setPlayers] = useState(() => {
                try {
                    const saved = localStorage.getItem('imposter_players');
                    return saved ? JSON.parse(saved) : DEFAULT_PLAYERS;
                } catch { return DEFAULT_PLAYERS; }
            });

            const [selectedCategories, setSelectedCategories] = useState(() => {
                try {
                    const saved = localStorage.getItem('imposter_categories');
                    return saved ? JSON.parse(saved) : ['Movies', 'Food', 'Animals'];
                } catch { return ['Movies', 'Food', 'Animals']; }
            });

            const [isRandomMode, setIsRandomMode] = useState(() => {
                try {
                    const saved = localStorage.getItem('imposter_random_mode');
                    return saved ? JSON.parse(saved) : false;
                } catch { return false; }
            });
            
            const [speakCategory, setSpeakCategory] = useState(() => {
                try {
                    const saved = localStorage.getItem('imposter_speak_category');
                    return saved ? JSON.parse(saved) : false;
                } catch { return false; }
            });

            const [newPlayerName, setNewPlayerName] = useState('');
            const [timerMinutes, setTimerMinutes] = useState(3);
            const [timerEnabled, setTimerEnabled] = useState(true);
            const [inspectedCategory, setInspectedCategory] = useState(null);

            // Long press logic
            const timerRef = useRef(null);
            
            // --- Save effects ---
            useEffect(() => { localStorage.setItem('imposter_players', JSON.stringify(players)); }, [players]);
            useEffect(() => { localStorage.setItem('imposter_categories', JSON.stringify(selectedCategories)); }, [selectedCategories]);
            useEffect(() => { localStorage.setItem('imposter_random_mode', JSON.stringify(isRandomMode)); }, [isRandomMode]);
            useEffect(() => { localStorage.setItem('imposter_speak_category', JSON.stringify(speakCategory)); }, [speakCategory]);

            const addPlayer = () => {
                if (newPlayerName.trim()) {
                    setPlayers([...players, newPlayerName.trim()]);
                    setNewPlayerName('');
                    if (navigator.vibrate) navigator.vibrate(10);
                }
            };

            const removePlayer = (index) => {
                if (players.length > MIN_PLAYERS) {
                    setPlayers(players.filter((_, i) => i !== index));
                    if (navigator.vibrate) navigator.vibrate(10);
                }
            };

            const toggleCategory = (cat) => {
                const isSelected = selectedCategories.includes(cat);
                if (isSelected) {
                    if (selectedCategories.length > 1) {
                        setSelectedCategories(selectedCategories.filter(c => c !== cat));
                        if (navigator.vibrate) navigator.vibrate(5);
                    }
                } else {
                    setSelectedCategories([...selectedCategories, cat]);
                    if (navigator.vibrate) navigator.vibrate(5);
                }
            };

            const handleTouchStart = (cat) => {
                timerRef.current = setTimeout(() => {
                    setInspectedCategory(cat);
                    if (navigator.vibrate) navigator.vibrate(30);
                }, 600);
            };

            const handleTouchEnd = () => {
                if (timerRef.current) {
                    clearTimeout(timerRef.current);
                    timerRef.current = null;
                }
            };

            return (
                <div className="flex flex-col h-[100dvh] relative z-10">
                    <CategoryInfoModal category={inspectedCategory} onClose={() => setInspectedCategory(null)} />

                    <div className="flex-1 overflow-y-auto no-scrollbar pb-32">
                        <div className="max-w-lg mx-auto p-6 pt-12">
                            {/* Header */}
                            <div className="mb-10 text-center">
                                <h1 className="text-6xl font-display font-black text-transparent bg-clip-text bg-gradient-to-br from-white via-white to-white/50 mb-2 drop-shadow-lg tracking-tight">IMPOSTER</h1>
                                <div className="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 backdrop-blur-md">
                                    <div className="w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse"></div>
                                    <span className="text-white/60 text-[10px] font-bold tracking-[0.3em] uppercase">Trust No One</span>
                                </div>
                            </div>

                            {/* Players */}
                            <section className="mb-6 glass-panel rounded-[2rem] p-6">
                                <h2 className="text-sm font-bold tracking-widest text-brand-400 mb-4 flex items-center gap-2 uppercase">
                                    <i className="fa-solid fa-users"></i> Agents
                                    <span className="ml-auto text-[10px] bg-white/5 px-2 py-1 rounded-md text-white/50">{players.length} / {MIN_PLAYERS}+</span>
                                </h2>
                                <div className="flex gap-2 mb-4">
                                    <input
                                        type="text"
                                        value={newPlayerName}
                                        onChange={(e) => setNewPlayerName(e.target.value)}
                                        onKeyDown={(e) => e.key === 'Enter' && addPlayer()}
                                        placeholder="Enter codename..."
                                        className="flex-1 bg-slate-950/50 rounded-xl px-5 py-4 outline-none border border-white/5 focus:border-brand-500/50 focus:bg-slate-950/80 transition-all placeholder:text-white/20 font-medium text-sm text-white"
                                    />
                                    <button 
                                        onClick={addPlayer}
                                        className="bg-brand-600 hover:bg-brand-500 w-24 flex items-center justify-center rounded-xl font-bold transition shadow-lg shadow-brand-900/20 active:scale-95 border border-white/10"
                                    >
                                        <i className="fa-solid fa-plus text-white text-lg"></i>
                                    </button>
                                </div>
                                <div className="flex flex-wrap gap-2">
                                    {players.map((p, i) => (
                                        <div key={i} className="flex items-center gap-2 bg-white/5 border border-white/5 pl-4 pr-1.5 py-1.5 rounded-full animate-fadeIn group hover:bg-white/10 transition-colors">
                                            <span className="text-xs font-bold text-slate-300">{p}</span>
                                            <button 
                                                onClick={() => removePlayer(i)}
                                                disabled={players.length <= MIN_PLAYERS}
                                                className={`w-6 h-6 flex items-center justify-center rounded-full text-[10px] transition-colors 
                                                    ${players.length > MIN_PLAYERS 
                                                        ? 'bg-white/5 hover:bg-red-500/20 text-white/40 hover:text-red-400' 
                                                        : 'opacity-20 cursor-not-allowed'
                                                    }`}
                                            >
                                                <i className="fa-solid fa-xmark"></i>
                                            </button>
                                        </div>
                                    ))}
                                </div>
                            </section>

                            {/* Timer */}
                            <section className="mb-6 glass-panel rounded-[2rem] p-6">
                                <div className={`flex items-center justify-between transition-all duration-300 ${timerEnabled ? 'mb-4' : 'mb-0'}`}>
                                    <h2 className="text-sm font-bold tracking-widest text-sky-400 flex items-center gap-2 uppercase">
                                        <i className="fa-solid fa-stopwatch"></i> Countdown
                                    </h2>
                                    <button 
                                        onClick={() => {
                                            setTimerEnabled(!timerEnabled);
                                            if(navigator.vibrate) navigator.vibrate(10);
                                        }}
                                        className={`w-12 h-7 rounded-full p-1 transition-all duration-300 ${timerEnabled ? 'bg-sky-500/80' : 'bg-white/10'}`}
                                    >
                                        <div className={`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform duration-300 ${timerEnabled ? 'translate-x-5' : 'translate-x-0'}`} />
                                    </button>
                                </div>
                                
                                <div className={`transition-all duration-300 overflow-hidden ${timerEnabled ? 'opacity-100 max-h-40' : 'opacity-0 max-h-0'}`}>
                                    <div className="flex justify-between items-end mb-2 px-1">
                                        <span className="text-white/40 text-[10px] font-bold uppercase">Duration</span>
                                        <span className="font-mono text-xl font-bold text-white">{timerMinutes} <span className="text-sm text-white/50">min</span></span>
                                    </div>
                                    <input
                                        type="range"
                                        min="1"
                                        max="15"
                                        value={timerMinutes}
                                        onChange={(e) => setTimerMinutes(parseInt(e.target.value))}
                                        className="w-full h-2 bg-slate-950 rounded-full appearance-none cursor-pointer accent-sky-500"
                                    />
                                </div>

                                {/* Divider */}
                                <div className="h-px bg-white/5 my-4"></div>

                                {/* Speak Category Toggle */}
                                <div className="flex items-center justify-between">
                                    <h2 className="text-sm font-bold tracking-widest text-purple-400 flex items-center gap-2 uppercase">
                                        <i className="fa-solid fa-volume-high"></i> Speak Category
                                    </h2>
                                    <button 
                                        onClick={() => {
                                            setSpeakCategory(!speakCategory);
                                            if(navigator.vibrate) navigator.vibrate(10);
                                        }}
                                        className={`w-12 h-7 rounded-full p-1 transition-all duration-300 ${speakCategory ? 'bg-purple-500/80' : 'bg-white/10'}`}
                                    >
                                        <div className={`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform duration-300 ${speakCategory ? 'translate-x-5' : 'translate-x-0'}`} />
                                    </button>
                                </div>
                            </section>

                            {/* Categories */}
                            <section>
                                <div className="flex items-center justify-between mb-4 px-2">
                                    <h2 className="text-sm font-bold tracking-widest text-teal-400 flex items-center gap-2 uppercase">
                                        <i className="fa-solid fa-layer-group"></i> Mission
                                    </h2>
                                    
                                    {/* Mode Toggle */}
                                    <div className="flex bg-slate-950/50 p-1 rounded-lg border border-white/5">
                                        <button 
                                            onClick={() => setIsRandomMode(false)}
                                            className={`px-3 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wide transition-all ${!isRandomMode ? 'bg-white/10 text-white shadow-sm' : 'text-white/30 hover:text-white/60'}`}
                                        >
                                            Select
                                        </button>
                                        <button 
                                            onClick={() => setIsRandomMode(true)}
                                            className={`px-3 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wide transition-all ${isRandomMode ? 'bg-gradient-to-r from-brand-600 to-fuchsia-600 text-white shadow-sm' : 'text-white/30 hover:text-white/60'}`}
                                        >
                                            Random
                                        </button>
                                    </div>
                                </div>

                                {isRandomMode ? (
                                    <div className="glass-panel rounded-[2rem] p-8 text-center animate-fadeIn border border-brand-500/20 relative overflow-hidden group">
                                        <div className="absolute inset-0 bg-gradient-to-br from-brand-500/10 via-transparent to-fuchsia-500/10 opacity-50 group-hover:opacity-100 transition-opacity duration-700"></div>
                                        <div className="relative z-10 py-8">
                                            <div className="w-24 h-24 mx-auto bg-gradient-to-br from-brand-500 to-fuchsia-600 rounded-3xl rotate-12 flex items-center justify-center shadow-lg shadow-brand-900/40 mb-6 group-hover:rotate-[20deg] group-hover:scale-110 transition-transform duration-500">
                                                <i className="fa-solid fa-dice text-4xl text-white drop-shadow-md"></i>
                                            </div>
                                            <h3 className="text-2xl font-display font-bold text-white mb-2">Mystery Mode</h3>
                                            <p className="text-white/50 text-sm max-w-[200px] mx-auto leading-relaxed">
                                                The system will automatically select a random category for your mission.
                                            </p>
                                        </div>
                                    </div>
                                ) : (
                                    <div className="grid grid-cols-2 sm:grid-cols-3 gap-3 animate-fadeIn">
                                        {DISPLAY_CATEGORIES.map(cat => {
                                            const iconSource = CATEGORY_ICONS[cat];
                                            const isSelected = selectedCategories.includes(cat);
                                            const isSupercell = cat === 'Supercell';
                                            
                                            // Conditional styling logic
                                            let cardClasses = `relative overflow-hidden flex flex-col items-center justify-center gap-3 p-4 rounded-[1.5rem] border transition-all duration-300 active:scale-95 group min-h-[110px] `;
                                            
                                            if (isSupercell) {
                                                if (isSelected) {
                                                    cardClasses += 'border-blue-400 bg-blue-900/20 ring-2 ring-blue-500 shadow-lg shadow-blue-900/40 text-white';
                                                } else {
                                                    cardClasses += 'border-white/10 bg-slate-900/40 opacity-60 grayscale-[0.5] hover:opacity-100 hover:grayscale-0 text-slate-300';
                                                }
                                            } else {
                                                if (isSelected) {
                                                    cardClasses += 'glass-panel bg-teal-500/10 border-teal-500/40 text-teal-100 shadow-[0_0_20px_rgba(20,184,166,0.1)]';
                                                } else {
                                                    cardClasses += 'glass-panel-lighter border-white/5 text-slate-400 hover:bg-white/5 hover:border-white/10';
                                                }
                                            }

                                            return (
                                                <button
                                                    key={cat}
                                                    onClick={() => toggleCategory(cat)}
                                                    onMouseDown={() => handleTouchStart(cat)}
                                                    onMouseUp={handleTouchEnd}
                                                    onMouseLeave={handleTouchEnd}
                                                    onTouchStart={() => handleTouchStart(cat)}
                                                    onTouchEnd={handleTouchEnd}
                                                    className={cardClasses}
                                                >
                                                    {/* Supercell Background Layers */}
                                                    {isSupercell && (
                                                        <div className="supercell-container pointer-events-none">
                                                            <div className="supercell-bg-1"></div>
                                                            <div className="supercell-bg-2"></div>
                                                        </div>
                                                    )}

                                                    <div className="relative z-10 flex flex-col items-center gap-2">
                                                        <FaIcon 
                                                            name={iconSource} 
                                                            sizeClass="text-2xl" 
                                                            className={`transition-all duration-300 ${isSupercell ? "drop-shadow-md brightness-125" : (isSelected ? "text-teal-400 scale-110" : "text-white/40 group-hover:text-white/70")}`} 
                                                        />
                                                        <span className={`text-xs font-bold tracking-wide transition-colors ${isSupercell ? 'text-white drop-shadow-md' : ''}`}>{cat}</span>
                                                    </div>

                                                    {/* Selection Indicator Checkmark */}
                                                    {isSelected && (
                                                        <div className={`absolute top-3 right-3 w-5 h-5 rounded-full flex items-center justify-center text-[10px] shadow-sm ${isSupercell ? 'bg-blue-500 text-white' : 'bg-teal-500 text-slate-900'}`}>
                                                            <i className="fa-solid fa-check"></i>
                                                        </div>
                                                    )}
                                                </button>
                                            )
                                        })}
                                    </div>
                                )}
                            </section>
                        </div>
                    </div>

                    {/* Fixed Bottom Start Button */}
                    <div className="absolute bottom-0 left-0 w-full p-6 bg-gradient-to-t from-[#020617] via-[#020617] to-transparent z-50">
                        <div className="max-w-lg mx-auto pb-[env(safe-area-inset-bottom)]">
                            <button
                                onClick={() => {
                                    if (players.length >= MIN_PLAYERS && (isRandomMode || selectedCategories.length > 0)) {
                                        if (navigator.vibrate) navigator.vibrate(30);
                                        // Pass the settings to start game
                                        onStartGame(players, isRandomMode ? [] : selectedCategories, timerEnabled ? timerMinutes * 60 : null, isRandomMode, speakCategory);
                                    }
                                }}
                                disabled={players.length < MIN_PLAYERS || (!isRandomMode && selectedCategories.length === 0)}
                                className="w-full bg-white text-slate-950 font-display font-bold text-lg py-5 rounded-[1.5rem] shadow-[0_0_30px_rgba(255,255,255,0.1)] hover:shadow-[0_0_50px_rgba(255,255,255,0.2)] disabled:opacity-50 disabled:shadow-none active:scale-[0.98] transition-all flex items-center justify-center gap-3 relative overflow-hidden group"
                            >
                                <div className="absolute inset-0 bg-gradient-to-r from-transparent via-slate-200/50 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"></div>
                                <span className="relative z-10 flex items-center gap-3">
                                    <i className="fa-solid fa-play text-sm"></i> START MISSION
                                </span>
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // 2. Card Reveal Screen
        const CardRevealScreen = ({ player, word, onNext, isLastPlayer }) => {
            const [step, setStep] = useState('handover'); 
            const [isRevealed, setIsRevealed] = useState(false);
            const [swipeX, setSwipeX] = useState(0);
            const touchStartX = useRef(null);
            
            useEffect(() => {
                setStep('handover');
                setIsRevealed(false);
                setSwipeX(0);
            }, [player]);

            const onTouchStart = (e) => { touchStartX.current = e.touches[0].clientX; };
            const onTouchMove = (e) => {
                if (touchStartX.current !== null && !isRevealed) {
                    setSwipeX(e.touches[0].clientX - touchStartX.current);
                }
            };
            const onTouchEnd = () => {
                if (!isRevealed && Math.abs(swipeX) > 100) handleReveal();
                else setSwipeX(0);
                touchStartX.current = null;
            };

            const handleReveal = () => {
                if (!isRevealed) {
                    setIsRevealed(true);
                    setStep('reveal');
                    setSwipeX(0);
                    if (navigator.vibrate) navigator.vibrate([30, 50]);
                }
            };

            const renderHandover = () => (
                <div className="flex flex-col items-center justify-center h-full text-center p-8 animate-slide-up relative z-10">
                    <div className="w-32 h-32 rounded-full flex items-center justify-center mb-10 relative">
                        <div className="absolute inset-0 bg-brand-500/20 blur-2xl rounded-full animate-pulse-slow"></div>
                        <div className="glass-panel w-full h-full rounded-full flex items-center justify-center border border-white/10">
                            {/* Replaced fa-user-secret with image */}
                            <img src="https://em-content.zobj.net/source/microsoft-teams/363/detective_light-skin-tone_1f575-1f3fb_1f3fb.png" alt="Detective" className="w-20 h-20" />
                        </div>
                    </div>
                    
                    <h2 className="text-brand-400 text-xs font-bold uppercase tracking-[0.4em] mb-4">Classified Info For</h2>
                    <h1 className="text-6xl font-display font-black text-white mb-16 drop-shadow-2xl">{player}</h1>
                    
                    <div className="w-full max-w-sm">
                        <button 
                            onClick={() => {
                                setStep('identify');
                                if (navigator.vibrate) navigator.vibrate(20);
                            }}
                            className="w-full glass-panel hover:bg-white/5 border border-white/10 text-white font-display font-bold text-lg py-5 rounded-[1.5rem] transition-all active:scale-95 flex items-center justify-center gap-3"
                        >
                            <i className="fa-solid fa-fingerprint text-brand-400"></i> Verify Identity
                        </button>
                    </div>
                </div>
            );

            const renderIdentity = () => (
                <div className="flex flex-col items-center justify-center h-full w-full p-6 relative overflow-hidden">
                    <div className="absolute top-0 left-0 w-full h-full bg-slate-950/90 backdrop-blur-sm z-0"></div>
                    
                    <div 
                        className="relative w-full max-w-xs aspect-[3/4] perspective-1000 z-10 select-none"
                        onClick={handleReveal}
                        onTouchStart={onTouchStart}
                        onTouchMove={onTouchMove}
                        onTouchEnd={onTouchEnd}
                    >
                         <div 
                            className={`relative w-full h-full transition-transform duration-700 transform-style-3d preserve-3d cursor-pointer ${isRevealed ? 'rotate-y-180' : 'rotate-y-0'}`}
                            style={!isRevealed && swipeX ? { transform: `rotateY(${swipeX / 5}deg)` } : {}}
                         >
                            {/* Front */}
                            <div className="absolute inset-0 backface-hidden">
                                <div className="w-full h-full bg-slate-900 rounded-[2.5rem] border border-white/10 shadow-2xl flex flex-col items-center justify-center p-8 group relative overflow-hidden">
                                    <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"></div>
                                    <div className="w-full h-full absolute top-0 left-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"></div>

                                    <div className="w-24 h-24 bg-slate-800 rounded-full flex items-center justify-center mb-8 ring-1 ring-white/10 shadow-[0_0_30px_rgba(0,0,0,0.5)]">
                                        {/* Replaced fa-lock with image */}
                                        <img src="https://em-content.zobj.net/source/microsoft-teams/337/locked_1f512.png" alt="Locked" className="w-12 h-12" />
                                    </div>
                                    <h3 className="text-white font-display font-bold text-2xl mb-2">TOP SECRET</h3>
                                    <p className="text-white/40 font-medium text-sm text-center tracking-wide">Tap or Swipe to decrypt</p>
                                    
                                    <div className="absolute bottom-10 flex gap-3 items-center text-white/20 text-[10px] font-bold uppercase tracking-widest animate-pulse">
                                        <span>Decrypt</span> <i className="fa-solid fa-chevron-right"></i>
                                    </div>
                                </div>
                            </div>

                            {/* Back Placeholder (Real content in renderReveal) */}
                             <div className="absolute inset-0 rotate-y-180 backface-hidden">
                                <div className="w-full h-full rounded-[2.5rem] bg-slate-800 border border-white/10"></div>
                            </div>
                        </div>
                    </div>
                </div>
            );

            const renderReveal = () => (
                 <div className="flex flex-col items-center justify-center h-full p-6 animate-fadeIn relative z-10">
                    <div className={`w-full max-w-sm aspect-[3/4] rounded-[2.5rem] flex flex-col items-center justify-center p-8 text-center relative overflow-hidden shadow-2xl border ${
                         word === "IMPOSTER" 
                            ? 'bg-gradient-to-br from-red-950 to-slate-950 border-red-500/20' 
                            : 'bg-gradient-to-br from-teal-950 to-slate-950 border-teal-500/20'
                    }`}>
                        <div className={`absolute top-[-50%] w-full h-full opacity-30 blur-[100px] ${word === 'IMPOSTER' ? 'bg-red-600' : 'bg-teal-500'}`}></div>

                        <p className={`text-[10px] uppercase tracking-[0.4em] font-bold mb-10 ${word === 'IMPOSTER' ? 'text-red-400' : 'text-teal-400'}`}>Your Mission Role</p>
                        
                        {word === "IMPOSTER" ? (
                            <>
                                <div className="w-32 h-32 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-8 ring-1 ring-red-500/30 shadow-[0_0_60px_rgba(239,68,68,0.2)] animate-pulse">
                                    <img src="https://em-content.zobj.net/source/microsoft-teams/337/shushing-face_1f92b.png" alt="Shushing" className="w-20 h-20 drop-shadow-lg" />
                                </div>
                                <h2 className="text-5xl font-display font-black text-red-500 tracking-tight mb-4 drop-shadow-sm">IMPOSTER</h2>
                                <p className="text-red-200/60 text-sm font-medium leading-relaxed max-w-[220px]">Blend in. Deceive. Don't let them know you are the spy.</p>
                            </>
                        ) : (
                            <>
                                <div className="w-32 h-32 bg-teal-500/10 rounded-full flex items-center justify-center mx-auto mb-8 ring-1 ring-teal-500/30 shadow-[0_0_60px_rgba(20,184,166,0.2)]">
                                    <img src="https://em-content.zobj.net/source/microsoft-teams/337/clipboard_1f4cb.png" alt="Clipboard" className="w-20 h-20 drop-shadow-lg" />
                                </div>
                                <h2 className="text-4xl font-display font-bold text-white mb-4 drop-shadow-sm">{word}</h2>
                                <p className="text-teal-200/60 text-sm font-medium leading-relaxed max-w-[220px]">Memorize this word. It proves your innocence.</p>
                            </>
                        )}
                    </div>

                    <div className="w-full max-w-sm mt-8">
                        <button 
                            onClick={() => {
                                if(navigator.vibrate) navigator.vibrate(20);
                                onNext();
                            }}
                            className="w-full bg-white hover:bg-slate-200 text-slate-950 py-5 rounded-[1.5rem] font-display font-bold text-lg shadow-[0_0_30px_rgba(255,255,255,0.1)] active:scale-95 transition-all flex items-center justify-center gap-3"
                        >
                            <i className="fa-solid fa-check-circle text-lg"></i>
                            {isLastPlayer ? "START GAME" : "NEXT PLAYER"}
                        </button>
                    </div>
                </div>
            );

            return (
                <div className="h-[100dvh] relative overflow-hidden">
                    <div className="absolute inset-0 pointer-events-none">
                         <div className="blob bg-brand-600 top-[-10%] left-[-10%] w-[50%] h-[50%]"></div>
                         <div className="blob bg-cyan-600 bottom-[-10%] right-[-10%] w-[50%] h-[50%] animation-delay-2000"></div>
                    </div>
                    <div className="relative z-10 h-full">
                        {step === 'handover' && renderHandover()}
                        {step === 'identify' && renderIdentity()}
                        {step === 'reveal' && renderReveal()}
                    </div>
                </div>
            );
        };

        // 3. Game Timer Screen
        const GameTimerScreen = ({ duration, onEndGame, firstPlayer, category, speakCategory }) => {
            const [timeLeft, setTimeLeft] = useState(duration || 0);
            const [active, setActive] = useState(!!duration);
            
            // Audio Refs (Lazy Initialization)
            const alarmRef = useRef(null);
            const identifyRef = useRef(null);

            // Initialize audio loop on mount
            useEffect(() => {
                // Initialize audio objects once
                if (!alarmRef.current) {
                    alarmRef.current = new Audio("https://www.dropbox.com/scl/fi/tdwfnelbxoo06kn1za6on/01HSGT2Z9YWSYE1X5KRHAEH9G3.mp3?rlkey=btqqywkoto0v6xbrc3w758qde&raw=1");
                    alarmRef.current.loop = true;
                }
                if (!identifyRef.current) {
                    identifyRef.current = new Audio("https://www.dropbox.com/scl/fi/l9k4wr93e20eb9v1c86c2/01JB990HCJZNAKJDSE9R0ZF2CQ.mp3?rlkey=mti7p26vh1j0hvvyapr0aly89&raw=1");
                }
                
                // Speak Category
                if (speakCategory && category) {
                    const utterance = new SpeechSynthesisUtterance(`The category is ${category}`);
                    utterance.rate = 0.9;
                    window.speechSynthesis.speak(utterance);
                }

                // Cleanup audio on unmount - Stops ALL music when leaving this screen
                return () => {
                    if (alarmRef.current) {
                        alarmRef.current.pause();
                        alarmRef.current.currentTime = 0;
                    }
                    if (identifyRef.current) {
                        identifyRef.current.pause();
                        identifyRef.current.currentTime = 0;
                    }
                };
            }, [category, speakCategory]);

            useEffect(() => {
                if (!active || !duration) return;
                
                if (timeLeft <= 0) {
                    setActive(false);
                    // Trigger Alarm
                    if (alarmRef.current) {
                        alarmRef.current.play().catch(e => console.log("Audio autoplay prevented"));
                    }
                    if(navigator.vibrate) navigator.vibrate([200, 100, 200, 100, 500]);
                    return;
                }
                const interval = setInterval(() => setTimeLeft(t => t - 1), 1000);
                return () => clearInterval(interval);
            }, [active, timeLeft, duration]);

            const handleIdentifyImposter = () => {
                if(navigator.vibrate) navigator.vibrate(50);
                
                // Stop alarm
                if (alarmRef.current) {
                    alarmRef.current.pause();
                    alarmRef.current.currentTime = 0;
                }
                
                // Play identify sound
                if (identifyRef.current) {
                    identifyRef.current.play().catch(e => console.log("Audio play prevented"));
                }
                
                onEndGame();
            };

            const formatTime = (seconds) => {
                const m = Math.floor(seconds / 60);
                const s = seconds % 60;
                return `${m}:${s < 10 ? '0' : ''}${s}`;
            };

            const progress = duration ? timeLeft / duration : 0;
            const strokeDasharray = 2 * Math.PI * 120;
            const strokeDashoffset = strokeDasharray * (1 - progress);

            return (
                <div className="h-[100dvh] flex flex-col items-center justify-between p-6 relative overflow-hidden">
                    <div className="absolute inset-0 pointer-events-none">
                        <div className={`absolute inset-0 bg-red-600/10 transition-opacity duration-1000 ${timeLeft < 30 && active ? 'opacity-100 animate-pulse' : 'opacity-0'}`}></div>
                        <div className="blob bg-brand-900/30 top-0 left-0 w-full h-full"></div>
                    </div>

                    {/* Header */}
                    <div className="w-full mt-8 glass-panel p-4 rounded-[1.5rem] flex items-center gap-4 z-10 border-l-2 border-l-brand-500">
                        <div className="bg-brand-500/20 w-10 h-10 rounded-full flex items-center justify-center">
                            <i className="fa-solid fa-comments text-brand-300"></i>
                        </div>
                        <div>
                            <p className="text-brand-300/70 text-[10px] uppercase font-bold tracking-widest mb-1">First Questioner</p>
                            <p className="text-white font-display font-bold text-xl tracking-wide">{firstPlayer}</p>
                        </div>
                    </div>

                    {/* Timer */}
                    <div className="flex-1 flex flex-col items-center justify-center z-10 w-full relative">
                        {duration ? (
                            <div className="relative transform scale-90 sm:scale-100 transition-transform">
                                <div className={`absolute inset-0 rounded-full blur-[100px] transition-all duration-1000 ${timeLeft < 30 ? 'bg-red-500/20' : 'bg-brand-500/10'}`}></div>
                                <div className="relative">
                                    {/* Track */}
                                    <svg className="w-72 h-72 transform -rotate-90">
                                        <circle cx="144" cy="144" r="120" stroke="rgba(255,255,255,0.05)" strokeWidth="8" fill="transparent" />
                                        <circle 
                                            cx="144" cy="144" r="120" stroke="currentColor" strokeWidth="8" fill="transparent" 
                                            className={`${timeLeft < 30 ? 'text-red-500 shadow-[0_0_20px_rgba(239,68,68,0.5)]' : 'text-brand-500 shadow-[0_0_20px_rgba(139,92,246,0.5)]'} transition-all duration-1000 drop-shadow-xl`}
                                            strokeDasharray={strokeDasharray}
                                            strokeDashoffset={strokeDashoffset}
                                            strokeLinecap="round"
                                        />
                                    </svg>
                                    <div className="absolute inset-0 flex flex-col items-center justify-center">
                                        <span className={`text-7xl font-mono font-bold tracking-tighter tabular-nums ${timeLeft < 30 ? 'text-red-500 animate-pulse' : 'text-white'}`}>
                                            {formatTime(timeLeft)}
                                        </span>
                                        <span className="text-white/30 text-[10px] font-bold uppercase tracking-[0.4em] mt-4 ml-1">
                                            {timeLeft === 0 ? "TIME'S UP" : "REMAINING"}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        ) : (
                            <div className="text-center py-16 px-8 glass-panel rounded-[2.5rem] border border-white/5">
                                <div className="w-24 h-24 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-8 ring-1 ring-white/10">
                                    <i className="fa-solid fa-infinity text-white/50 text-4xl"></i>
                                </div>
                                <h2 className="text-3xl font-display font-bold mb-4 text-white">Untimed Mode</h2>
                                <p className="text-white/40 text-sm font-medium leading-relaxed max-w-xs mx-auto">
                                    Analyze behavior. Watch for nervous ticks. Take your time to find the spy.
                                </p>
                            </div>
                        )}
                    </div>

                    {/* Action */}
                    <div className="w-full z-10 pb-[env(safe-area-inset-bottom)] mb-6">
                        <button 
                            onClick={handleIdentifyImposter}
                            className="w-full bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white font-display font-bold text-lg py-5 rounded-[1.5rem] shadow-[0_0_40px_rgba(220,38,38,0.4)] transition-all active:scale-[0.98] flex items-center justify-center gap-3 border border-red-400/30"
                        >
                            <i className="fa-solid fa-fingerprint text-xl"></i>
                            IDENTIFY IMPOSTER
                        </button>
                    </div>
                </div>
            );
        };

        // 4. Results Screen
        const ResultScreen = ({ imposterName, word, onRestart }) => {
            return (
                <div className="h-[100dvh] flex flex-col items-center justify-center p-6 text-center overflow-hidden relative">
                    <div className="absolute inset-0 pointer-events-none">
                        <div className="blob bg-red-600/20 top-0 left-0 w-full h-full"></div>
                    </div>
                    
                    <div className="relative mb-12 animate-float w-full max-w-sm z-10">
                        <div className="absolute inset-0 bg-red-500 rounded-[2.5rem] blur-[50px] opacity-20"></div>
                        <div className="relative glass-panel p-10 rounded-[2.5rem] border border-red-500/30">
                            <div className="text-[10px] font-bold text-red-400 uppercase tracking-[0.4em] mb-10">Identity Confirmed</div>
                            <div className="w-28 h-28 bg-gradient-to-br from-red-500/20 to-transparent rounded-full flex items-center justify-center mx-auto mb-8 ring-1 ring-red-500/40 shadow-[0_0_40px_rgba(239,68,68,0.2)]">
                                <img src="https://em-content.zobj.net/source/microsoft-teams/400/beaming-face-with-smiling-eyes_1f601.png" alt="Beaming Face" className="w-24 h-24 drop-shadow-lg" />
                            </div>
                            <span className="text-4xl font-display font-bold text-white block break-words leading-tight">
                                {imposterName}
                            </span>
                        </div>
                    </div>

                    <div className="glass-panel p-6 rounded-[2rem] w-full max-w-sm mb-10 border border-white/5 z-10">
                        <p className="text-slate-500 text-[10px] uppercase tracking-widest font-bold mb-3">The Secret Word</p>
                        <p className="text-3xl font-display font-bold text-teal-400 tracking-wide">{word}</p>
                    </div>

                    <button 
                        onClick={() => {
                            if(navigator.vibrate) navigator.vibrate(20);
                            onRestart();
                        }}
                        className="w-full max-w-sm bg-white hover:bg-slate-200 text-slate-950 py-5 rounded-[1.5rem] font-display font-bold text-lg shadow-[0_0_30px_rgba(255,255,255,0.15)] active:scale-95 transition-all flex items-center justify-center gap-3 z-10"
                    >
                        <i className="fa-solid fa-rotate-right text-lg"></i> PLAY AGAIN
                    </button>
                </div>
            );
        };

        // --- MAIN APP ---
        const App = () => {
            const [gameState, setGameState] = useState('setup'); 
            const [gameData, setGameData] = useState({
                players: [],
                imposterIndex: -1,
                secretWord: '',
                duration: null,
                firstPlayer: '',
                category: '',
                speakCategory: false
            });
            const [currentPlayerIndex, setCurrentPlayerIndex] = useState(0);

            const startGame = (players, selectedCategories, duration, isRandomMode, speakCategory) => {
                // If random mode or user picked 'Random' explicitly (backwards compat), select one randomly
                const useRandom = isRandomMode || (selectedCategories && selectedCategories.length === 0);

                let finalCategory;
                if (useRandom) {
                    const allActualCategories = Object.keys(WORD_BANK);
                    finalCategory = allActualCategories[Math.floor(Math.random() * allActualCategories.length)];
                } else {
                    finalCategory = selectedCategories[Math.floor(Math.random() * selectedCategories.length)];
                }

                const words = WORD_BANK[finalCategory];
                const secretWord = words[Math.floor(Math.random() * words.length)];
                const imposterIndex = Math.floor(Math.random() * players.length);
                
                let potentialFirst = Math.floor(Math.random() * players.length);
                if (players.length > 2 && potentialFirst === imposterIndex) {
                    potentialFirst = (potentialFirst + 1) % players.length;
                }

                setGameData({
                    players,
                    imposterIndex,
                    secretWord,
                    duration,
                    firstPlayer: players[potentialFirst],
                    category: finalCategory,
                    speakCategory
                });
                
                setCurrentPlayerIndex(0);
                setGameState('pass');
            };

            const handleNextPlayer = () => {
                if (currentPlayerIndex < gameData.players.length - 1) {
                    setCurrentPlayerIndex(prev => prev + 1);
                } else {
                    setGameState('active');
                }
            };

            const handleEndGame = () => setGameState('result');
            const handleRestart = () => setGameState('setup');

            return (
                <div className="w-full h-full text-slate-200 font-sans selection:bg-brand-500/30">
                    <div className="fixed inset-0 bg-[#020617] -z-10"></div>
                    
                    {gameState === 'setup' && <SetupScreen onStartGame={startGame} />}
                    {gameState === 'pass' && (
                        <CardRevealScreen 
                            key={currentPlayerIndex}
                            player={gameData.players[currentPlayerIndex]}
                            word={currentPlayerIndex === gameData.imposterIndex ? "IMPOSTER" : gameData.secretWord}
                            onNext={handleNextPlayer}
                            isLastPlayer={currentPlayerIndex === gameData.players.length - 1}
                        />
                    )}
                    {gameState === 'active' && (
                        <GameTimerScreen 
                            duration={gameData.duration}
                            onEndGame={handleEndGame}
                            firstPlayer={gameData.firstPlayer}
                            category={gameData.category}
                            speakCategory={gameData.speakCategory}
                        />
                    )}
                    {gameState === 'result' && (
                        <ResultScreen 
                            imposterName={gameData.players[gameData.imposterIndex]}
                            word={gameData.secretWord}
                            onRestart={handleRestart}
                        />
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
